<div class="row">
  <div class="span8 offset2">

    <h1>Your Groups</h1>

    <%= render "shared/group_success_messages" %>

    <div class="groups-container">
      <% @groups.each do |group| %>
        <div class="group">
          <span class="group-gid">ID: <%= group.gid %></span>

          <span class="group-title"><%= group.title %></span>

          <% if current_user == group.owner %>
            <span class="group-owner">You own this group.</span>
          <% else %>            
            <span class="group-owner">Owned by <%= group.owner.full_name %></span>
          <% end %> 

          <div class="btn-container">
            <%#
              Group Action Buttons
                - Edit/Delete if group is owned,
                - else Leave Group
            %>
            <%  if current_user == group.owner %>
              <%= link_to "Delete", {action: 'destroy', id: group.gid }, {
                :method => :delete, 
                confirm: "Are you sure you want to delete this group? This action cannot be undone.", 
                class: "btn btn-danger pull-right",
              } %>
              <%= link_to "Edit", edit_group_path(group.gid), class: "btn btn-spacer pull-right" %>
            <% else %>
              <%# link_to "Leave Group", {action: 'leave', id: group.gid }, {
                :method => :delete,        
                confirm: "Are you sure you want to leave? You can join again later, but all your expenses will be reset.", 
                class: "btn btn-danger pull-right",
              } %>              
            <% end %>
          </div><!-- .btn-container -->
          
        </div><!-- .group -->
      <% end %>

    </div><!-- .groups-container -->

    <%= link_to "Create a new group", new_group_path, class: "btn btn-large btn-primary pull-right" %>
    <%= link_to "Join another group", join_group_path, class: "btn btn-spacer btn-large btn-primary pull-right" %>

  </div>
</div>